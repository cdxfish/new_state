(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45ccf9d4"],{"0911":function(t,n,a){"use strict";var e=a("b107"),i=a.n(e);i.a},"2c45":function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAwCAYAAADgvwGgAAACYklEQVRYR73YP4jTYBjH8d/TJG1PNC4FpVUQ6tbNTt06FVNICkLd3FS4U+gkuvhvUjcF18Opa0MDbUcHhUPBG8RDELoWFxGcpOn5yFuuR9peat7kjdmahveT99umeRsCAMuyzFwudwWA5vv+/mAw+Cn2q96oXq+fNk3zFYAbAAjAW03T7rqu+005ZlnWBcMwvgA4ezT4IRF98n2/NRwOv6sEqdlsntd1fQ/ApZWBP/u+f200Go1VgVStVo1isXiLiJ4DOBMY+A+Ad5qm3VaVVHxGaLfbW9PptMPMz1ZmcQhgfzabOSqSzrHF1mq1HjDzQwCn0ki6hFmWlTMM4w6AJ2kkXcLSTrqGpZk0FEsjaSiWRtKNmOqkkTBVSSNhYoa1Wm2rUCh0iCj2hR8ZWyS1bfs+ET2Kc+FLY0mSSmNJksbC4iZNhMkmTYTJJk2M/SspM++Zpnm12+3+UoaFJWXm30R0z/O818qwsKTMzAB2J5PJjlKsUqlky+XyNoCXi7wCI6I34/F4WxkWyPgYgBnA1Gd0HKcD4Glg/Tn3mPmjrutN13V/JJ7ZSemOZiWWgl8BNDzPm4h9iTCRLpvN7jCzWCAdpwNw4pozERaWDsABEV3v9/tiZuLbON9iYTLpgutPaUz29zARJpsuFhY3nTSWJJ00liRdZExFukiYqnSRMFXpNmKq04ViaaQLxdJIt4almW4JE48mSqXSTQAv0vgfvYQ5jnMOwHsAl4NvhN0mVo6RekmNRuNiPp8/CMxq7Q4rNeKGg//vgzJxIrZtFzKZTI2ItEwm86HX64kHZMd3WFUz+wubq5plThS7PwAAAABJRU5ErkJggg=="},"2ca2":function(t,n,a){},"360a":function(t,n,a){"use strict";var e=a("3eb3"),i=a.n(e);i.a},"3eb3":function(t,n,a){},4965:function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAwCAYAAADgvwGgAAACWklEQVRYR7WYT4vTQBTA32tCSnGrJ9GDIHj2JKx/ThYPhUmlvZiP4GfQS2UXLLTYRRTvXsXDCgk9tKdcvfgphD1Kk7pJKORJpFmy3U1mJjPJdSbz4/3y/oRBaOhhjN1st9uPAMDYbre/FovFH2yCZdv2fdM0PwLASwDIGG6SJK+1w4bD4R1E/EFEj7OodsFsEPGJVhhj7J5lWd+J6NmesbM0TZ9rg+3UfQEAVogoY0aIOFmv1ydaYCXq8uCOgyCY+76/UYaVqSOiGBFnruse5VQlWJU6AJjHcTxbrVZ/lWGi6oqJUisyGXVKMFl1tWF11NWC1VUnDatSl6bpHBGnnued8/osN0E46o6CIDjJCpYHytYrYRx1U9d1j0Ug3DrTpY77zXSqq4TpVlcKa0LdtbCm1F2B9fv9G51O55SI+sXF3ZiQzrqyDP2f+qPR6BURfQWAg8LGSKZgRUoAHccxkiQZE9E7RCzWnVTBCsF6vZ7Z7XbHADAuwojobRiGn3zfj0UOEtlTqZGIPgDATKTvCcMcx7mVJMkpALzYe2lDRO89z5uJHMbbc/GNbNu+a5rmEgAeAkBr78U3QRB8VlV6qRFXFbUOpVe6/mAweGAYxjcAONSt9NoRU6VUJUtL51kTfbJyeHKUTjzPm/IykDvPiht0KuX+g2RgXUqFYBlQh1Jh2C7C0sIXyVIpmKpSaZiK0lqwukprw+ooVYLJKlWGySjVAuMpJaJJGIZ6riby9lZR+L9brVZPW2Q5sKSXnmfXS9phBaXNX5TlETLGbluW9RQRjSiKfi6Xy7N/2Mzr4z5AOUcAAAAASUVORK5CYII="},"66e1":function(t,n,a){"use strict";var e=a("77c2"),i=a.n(e);i.a},7587:function(t,n,a){},"77c2":function(t,n,a){},"845e":function(t,n,a){"use strict";a.r(n);var e=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"add"},[e("div",{staticClass:"top box"},[e("div",{staticClass:"row",on:{click:function(n){t.isOriginDateShow=!0}}},[e("div",{staticClass:"left"},[t._v("\n        个人班次:\n      ")]),e("div",{staticClass:"right"},[e("span",[t._v(t._s(t.formData.originInfo.sheduling_date?t.formatDateTime(t.formData.originInfo.sheduling_date)+" "+t.formData.originInfo.arrange_order_id+" "+t.formData.originInfo.time_interval:"请选择"))]),e("img",{attrs:{src:a("2c45"),alt:""}})])]),e("div",{staticClass:"hr"}),e("div",{staticClass:"row",on:{click:function(n){t.isChangeUserShow=!0}}},[e("div",{staticClass:"left"},[t._v("\n        换班对象:\n      ")]),e("div",{staticClass:"right"},[e("span",[t._v(t._s(t.formData.changeUser.name?t.formData.changeUser.name+" ("+(t.formData.changeUser.jobnumber||"暂无")+")":"请选择"))]),e("img",{attrs:{src:a("2c45"),alt:""}})])]),e("div",{staticClass:"hr"}),e("div",{staticClass:"row",on:{click:t.showChangeDate}},[e("div",{staticClass:"left"},[t._v("\n        换班班次:\n      ")]),e("div",{staticClass:"right"},[e("span",[t._v(t._s(t.formData.changeInfo.sheduling_date?t.formatDateTime(t.formData.changeInfo.sheduling_date)+" "+t.formData.changeInfo.arrange_order_id+t.formData.changeInfo.time_interval:"请选择"))]),e("img",{attrs:{src:a("2c45"),alt:""}})])])]),e("div",{staticClass:"box middle"},[e("div",{staticClass:"row"},[t._v("\n      换班原因:\n    ")]),e("div",{staticClass:"hr"}),e("div",{staticClass:"row textarea_box"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.commit,expression:"formData.commit"}],attrs:{name:"",id:"",rows:"10",placeholder:"请填写换班原因"},domProps:{value:t.formData.commit},on:{input:function(n){n.target.composing||t.$set(t.formData,"commit",n.target.value)}}})])]),e("common-btn",{staticClass:"add_btn",on:{click:t.commitChange}},[t._v("发起申请")]),t.isOriginDateShow?e("my-dialog",[e("origin-info",{on:{selectOrigin:t.selectOrigin}})],1):t._e(),t.isChangeUserShow?e("my-dialog",[e("change-users",{attrs:{changeInfo:t.formData.changeInfo},on:{selectUser:t.selectUser}})],1):t._e(),t.isChangeDateShow?e("my-dialog",[e("change-info",{attrs:{changeUser:t.formData.changeUser},on:{selectChange:t.selectChange}})],1):t._e()],1)},i=[],s=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"change_user"},t._l(t.userData,function(n){return a("div",{key:n.id,staticClass:"content"},[a("div",{staticClass:"row",on:{click:function(a){return t.selectItem(n)}}},[a("img",{attrs:{src:n.avatar,alt:""}}),a("div",{staticClass:"name"},[t._v(t._s(n.name||"暂无"))]),a("div",{staticClass:"job_nub"},[t._v(t._s(n.jobnumber||"暂无"))]),a("div",{staticClass:"position"},[t._v(t._s(n.position||"暂无"))])]),a("div",{staticClass:"hr"})])}),0)},o=[],c={name:"ChangeUsers",props:["changeInfo"],data:function(){return{userData:[{id:1,name:"张三",jobnumber:"Q123412",position:"值班站长",avatar:"https://wx3.sinaimg.cn/crop.0.4.1280.711/b10d83d8gy1fu76dzn2mtj20zk0k0gre.jpg"}]}},methods:{selectItem:function(t){this.$emit("selectUser",t)},getShedulingObject:function(){var t=this;this.$rpc.call("funenc_xa_station.sheduling_record","get_sheduling_object",[],{}).then(function(n){t.userData=n}).catch(function(t){console.log(t),alert("获取换班对象失败")})}},mounted:function(){console.log(this.changeInfo.id),this.getShedulingObject()}},r=c,h=(a("360a"),a("fc05")),l=Object(h["a"])(r,s,o,!1,null,"d9996dfe",null),g=l.exports,m=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"origin_info page"},[e("div",{staticClass:"header"},[e("div",{staticClass:"flex1",on:{click:function(n){return t.changeMonth("prev")}}},[e("img",{attrs:{src:a("4965"),alt:""}})]),e("div",{staticClass:"flex2"},[t._v("\n      "+t._s(t._f("moment")(t.nowMonth,"YYYY年MM月"))+"\n    ")]),e("div",{staticClass:"flex1",on:{click:function(n){return t.changeMonth("next")}}},[e("img",{attrs:{src:a("2c45"),alt:""}})])]),e("div",{staticClass:"scroll_content_box"},[e("div",{staticClass:"box"},[t._l(t.originData,function(n){return e("div",{key:n.id,staticClass:"row",on:{click:function(a){return t.handleClick(n)}}},[e("div",{staticClass:"left"},[t._v(t._s(t._f("moment")(n.sheduling_date,"YYYY-MM-DD")))]),e("div",{staticClass:"right"},[t._v(t._s(n.arrange_order_id)+" "+t._s(n.time_interval))]),e("div",{staticClass:"hr"})])}),0===t.originData.length?e("no-item"):e("div",{staticClass:"blank"})],2)])])},u=[],d=a("b8a0"),f={name:"OriginInfo",components:{Item:d["a"]},data:function(){return{originData:[{id:1,sheduling_date:"2018-10-11",arrange_order_id:"夜",time_interval:"18:00-06:00"}],nowMonth:new Date}},methods:{changeMonth:function(t){switch(t){case"prev":this.$moment(this.nowMonth)>this.$moment()&&(this.nowMonth=this.$moment(this.nowMonth).subtract(1,"month"));break;case"next":this.nowMonth=this.$moment(this.nowMonth).add(1,"month");break;default:break}},getShedulingData:function(){var t=this;this.$rpc.call("funenc_xa_station.sheduling_record","get_sheduling_record_by_user",[],{month:this.$moment(this.nowMonth).format("YYYY-MM-01")}).then(function(n){t.originData=n}).catch(function(t){console.log(t),alert("获取班表失败")})},handleClick:function(t){this.$emit("selectOrigin",t)}},mounted:function(){this.getShedulingData()},watch:{nowMonth:function(t){console.log(t.format("YYYY-MM"))}}},v=f,_=(a("efe2"),Object(h["a"])(v,m,u,!1,null,"226a3833",null)),C=_.exports,p=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"change_info page"},[e("div",{staticClass:"header"},[e("div",{staticClass:"flex1",on:{click:function(n){return t.changeMonth("prev")}}},[e("img",{attrs:{src:a("4965"),alt:""}})]),e("div",{staticClass:"flex2"},[t._v("\n      "+t._s(t._f("moment")(t.nowMonth,"YYYY年MM月"))+"\n    ")]),e("div",{staticClass:"flex1",on:{click:function(n){return t.changeMonth("next")}}},[e("img",{attrs:{src:a("2c45"),alt:""}})])]),e("div",{staticClass:"scroll_content_box"},[e("div",{staticClass:"box"},[t._l(t.changeData,function(n){return e("div",{key:n.id,staticClass:"row",on:{click:function(a){return t.handleClick(n)}}},[e("div",{staticClass:"left"},[t._v(t._s(t._f("moment")(n.sheduling_date,"YYYY-MM-DD")))]),e("div",{staticClass:"right"},[t._v(t._s(n.arrange_order_id)+" "+t._s(n.time_interval))]),e("div",{staticClass:"hr"})])}),0===t.changeData.length?e("no-item"):e("div",{staticClass:"blank"})],2)])])},D=[],A={name:"ChangeInfo",components:{Item:d["a"]},props:["changeUser"],data:function(){return{changeData:[{id:1,sheduling_date:"2019-10-11",arrange_order_id:"夜",time_interval:"18:00-06:00"}],nowMonth:new Date}},methods:{changeMonth:function(t){switch(t){case"prev":this.$moment(this.nowMonth)>this.$moment()&&(this.nowMonth=this.$moment(this.nowMonth).subtract(1,"month"));break;case"next":this.nowMonth=this.$moment(this.nowMonth).add(1,"month");break;default:break}},getShedulingData:function(){var t=this;this.$rpc.call("funenc_xa_station.sheduling_record","get_sheduling_by_user_id",[],{month:this.$moment(this.nowMonth).format("YYYY-MM-01"),user_id:this.changeUser.id}).then(function(n){t.changeData=n}).catch(function(t){console.log(t),alert("获取班表失败")})},handleClick:function(t){this.$emit("selectChange",t)}},mounted:function(){this.getShedulingData()},watch:{nowMonth:function(t){this.getShedulingData()}}},w=A,b=(a("66e1"),Object(h["a"])(w,p,D,!1,null,"0fac9e86",null)),Y=b.exports,M={name:"ApplicationAdd",components:{ChangeUsers:g,OriginInfo:C,ChangeInfo:Y},data:function(){return{isOriginDateShow:!1,isChangeUserShow:!1,isChangeDateShow:!1,formData:{originInfo:{},changeUser:{},changeInfo:{},commit:""}}},methods:{selectUser:function(t){this.formData.changeUser=t,this.isChangeUserShow=!1},selectOrigin:function(t){this.formData.originInfo=t,this.isOriginDateShow=!1},selectChange:function(t){this.formData.changeInfo=t,this.isChangeDateShow=!1},showChangeDate:function(){this.formData.changeUser&&this.formData.changeUser.id?this.isChangeDateShow=!0:alert("请选择换班对象")},formatDateTime:function(t){if(t)return this.$moment(t).format("MM-DD")},commitChange:function(){var t=this;this.formData.originInfo.id&&this.formData.changeUser.id&&this.formData.changeInfo.id?this.$rpc.call("funenc_xa_station.change_shifts","save_change_shifts",[],{personal_change_shifts_1:this.formData.originInfo.id,change_shifts_user_id:this.formData.changeUser.id,change_shifts_group_1:this.formData.changeInfo.id,reason:this.formData.commit}).then(function(n){console.log("res",n),n&&t.$router.push({path:"/changeapplication"})}).catch(function(t){console.log(t),alert("换班失败")}):console.log("信息不全")}}},k=M,U=(a("0911"),Object(h["a"])(k,e,i,!1,null,"2140e2d2",null));n["default"]=U.exports},"8a55":function(t,n,a){"use strict";var e=a("7587"),i=a.n(e);i.a},b107:function(t,n,a){},b8a0:function(t,n,a){"use strict";var e=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("router-link",{staticClass:"item",attrs:{to:"/changeapplication/detail/"+t.changeApplictionItem.id,tag:"div"}},[a("div",{staticClass:"row"},[a("div",[t._v("换班班次：")]),a("div",[t._v(t._s(t._f("moment")(t.changeApplictionItem.changeDate,"YYYY-MM-DD"))+" "+t._s(t.changeApplictionItem.changeDON)+" ("+t._s(t.changeApplictionItem.changeTime)+")")])]),a("div",{staticClass:"hr"}),a("div",{staticClass:"row"},[a("div",[t._v("个人班次：")]),a("div",[t._v(t._s(t._f("moment")(t.changeApplictionItem.originDate,"YYYY-MM-DD"))+" "+t._s(t.changeApplictionItem.originDON)+" ("+t._s(t.changeApplictionItem.originTime)+")")])]),a("div",{staticClass:"hr"}),a("div",{staticClass:"footer",class:t._statusColor(t.changeApplictionItem.status)},[t._v("\n    "+t._s(t.changeApplictionItem.status)+"\n  ")])])},i=[],s={name:"Item",props:{changeApplictionItem:{type:Object,default:function(){return{id:1,changeDate:"2018-10-10",changeDON:"白",changeTime:"09:00-18:00",originDate:"2018-10-11",originDON:"夜",originTime:"18:00-06:00",status:"待确认"}}}},methods:{_statusColor:function(t){switch(t){case"待确认":return"queren";case"待审批":return"shenpi";case"已拒绝":return"jujue";case"已驳回":return"bohui";case"已通过":return"tongguo";default:break}}}},o=s,c=(a("8a55"),a("fc05")),r=Object(c["a"])(o,e,i,!1,null,"2d76c5eb",null);n["a"]=r.exports},efe2:function(t,n,a){"use strict";var e=a("2ca2"),i=a.n(e);i.a}}]);
//# sourceMappingURL=chunk-45ccf9d4.4cdbd672.js.map