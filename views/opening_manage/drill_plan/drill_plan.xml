<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>

        <record model="ir.actions.server" id="create_drill_plan_button">
            <field name="name">新增计划</field>
            <field name="state">code</field>
            <field name="type">ir.actions.server</field>
            <field name="model_id" ref="model_funenc_xa_station_drill_plan"/>
            <field name="condition">True</field>
            <field name="binding_model_id" ref="model_funenc_xa_station_drill_plan"/>
            <field name="binding_type">action_button</field>
            <field name="binding_action">演练计划</field>
            <field name="code">
                action = model.create_drill_plan()
            </field>
        </record>

        <record model="ir.ui.view" id="funenc_xa_station_drill_plan_list">
            <field name="name">funenc_xa_station_drill_plan_list</field>
            <field name="model">funenc_xa_station.drill_plan</field>
            <field name="arch" type="xml">
                <tree limit="15" create="0" class="noOpen">
                    <field name="drill_project" string="演练项目"/>
                    <field name="drill_time" string="演练时间"/>
                    <field name="drill_plan" string="演练方案"/>
                    <field name="drill_hierarchy" string="演练层级"/>
                    <field name="create_date" string="创建时间"/>
                    <field name="state" string="状态"/>
                    <widget string="操作" name="treebtns" template="widget_edit_delete"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="funenc_xa_station_drill_plan_form">
            <field name="name">funenc_xa_station_drill_plan_form</field>
            <field name="model">funenc_xa_station.drill_plan</field>
            <field name="arch" type="xml">
                <form>
                    <div class="container-fluid">
                        <group>
                            <field name="drill_project" string="演练项目"/>
                            <field name="drill_time" string="演练时间"/>
                            <field name="drill_plan" string="演练方案" widget="many2many_binary"/>
                            <field name="drill_hierarchy" string="演练层级"/>
                            <field name="state" string="状态"/>
                            <field name="partake_site_ids" string="参与站点" widget="many2many_tags"
                                   options="{'no_create':True,'no_open':True}"/>
                        </group>
                        <footer>
                            <button name='drill_plan_save'
                                    string='保存'
                                    class='btn-primary'
                                    type='object'/>
                            <button name='drill_plan_start'
                                    string='演练计划开始'
                                    class='btn-primary'
                                    type='object'/>
                            <button string='取消'
                                    class='btn-default'
                                    special='cancel'/>
                        </footer>
                    </div>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="funenc_xa_station_drill_plan_form_2">
            <field name="name">funenc_xa_station_drill_plan_form</field>
            <field name="model">funenc_xa_station.drill_plan</field>
            <field name="arch" type="xml">
                <form>
                    <div class="container-fluid">
                        <group>
                            <field name="drill_project" string="演练项目"/>
                            <field name="drill_time" string="演练时间"/>
                            <field name="drill_plan" string="演练方案" widget="many2many_binary"/>
                            <field name="drill_hierarchy" string="演练层级"/>
                            <field name="state" string="状态"/>
                            <field name="partake_site_ids" string="参与站点" widget="many2many_tags"
                                   options="{'no_create':True,'no_open':True}"/>
                        </group>
                        <group string="演练结果">
                            <field name="drill_result_ids">
                                <tree class="noOpen">
                                    <field name="line_id" string="线路"/>
                                    <field name="site_id" string="站点"/>
                                    <field name="people_number" string="参与人次"/>
                                    <!--<field name="drill_hierarchy" string="状态"/>-->
                                    <!--<field name="state" string="填写人"/>-->
                                    <!--<field name="state" string="填写时间"/>-->
                                </tree>

                            </field>

                        </group>
                    </div>
                </form>
            </field>
        </record>

        <record id="xa_station_drill_plan_form_button" model="ir.ui.view">
            <field name="name">演练计划详情</field>
            <field name="model">funenc_xa_station.drill_plan</field>
            <field name="arch" type="xml">
                <form>
                    <h2>基本信息</h2>
                    <div class="row">
                       <div class="col-md-3">

                          <div class="col-md-4">
                             <label for="drill_project" string="培训项目"/>
                          </div>
                         <div class="col-md-8">
                             <field name="drill_project" />
                          </div>
                       </div>
                       <div class="col-md-3">
                          <div class="col-md-4">
                             <label for="create_date" string="发布日期"/>
                          </div>
                         <div class="col-md-8">
                             <field name="create_date" />
                          </div>
                       </div>

                       <div class="col-md-3">
                          <div class="col-md-4">
                             <label for="line_id" string="线路"/>
                          </div>
                         <div class="col-md-8">
                             <field name="line_id" domain="[('department_hierarchy','=',2)]" options="{'no_create':True,'no_open':True}"/>
                          </div>
                       </div>
                       <div class="col-md-3">
                          <div class="col-md-4">
                             <label for="site_id" string="站点"/>
                          </div>
                         <div class="col-md-8">
                             <field name="site_id" domain="[('department_hierarchy','=',3)]" options="{'no_create':True,'no_open':True}"/>
                          </div>
                       </div>
                    </div>
                    <div class="row">
                       <div class="col-md-3">

                          <div class="col-md-4">
                             <label for="drill_hierarchy" string="演练层级"/>
                          </div>
                         <div class="col-md-8">
                             <field name="drill_hierarchy" />
                          </div>
                       </div>
                       <div class="col-md-3">
                          <div class="col-md-4">
                             <label for="drill_time" string="演练时间"/>
                          </div>
                         <div class="col-md-8">
                             <field name="drill_time" />
                          </div>
                       </div>
                    </div>
                    <div class="row">
                       <div class="col-md-3">

                          <div class="col-md-4">
                             <label for="drill_plan" string="演练方案"/>
                          </div>
                         <div class="col-md-8">
                             <field name="drill_plan" widget="many2many_binary"/>
                          </div>
                       </div>
                    </div>
                    <h2>演练结果附件</h2>
                    <widget name="treebtns" template="new_button_increase"></widget>
                </form>
            </field>
        </record>

        <record model="ir.actions.act_window" id="xa_station_drill_plan_action">
            <field name="name">演练计划</field>
            <field name="res_model">funenc_xa_station.drill_plan</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem id="xa_station_drill_plan_menu" name="演练计划"
                  action="xa_station_drill_plan_action" parent="opening_manage" sequence="5"
        />

        <menuitem id="xa_station_drill_plan_menu_01" name="(缺)演练计划汇总"
                  action="xa_station_drill_plan_action" parent="opening_manage" sequence="6"
        />


    </data>
</odoo>